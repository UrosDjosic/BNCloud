<div class="artist-crud-container">
  <mat-card class="artist-crud-card">

    <h2 class="title">Artist Management</h2>

    <!-- Toggle button -->
    <button mat-stroked-button color="accent" (click)="toggleView()">
      {{ isCreating ? 'Back to Artist List' : 'Create New Artist' }}
    </button>

    <!-- CREATE VIEW -->
    <div *ngIf="isCreating" class="form-container">
      <h3>Create Artist</h3>
      <form [formGroup]="createForm" (ngSubmit)="createArtist()" class="artist-form">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Biography</mat-label>
          <textarea matInput formControlName="biography" rows="4"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Genres (separate with comma)</mat-label> <input matInput formControlName="genres">
        </mat-form-field>

        <button mat-raised-button color="primary" type="submit" class="submit-btn">Create</button>
      </form>
    </div>

    <!-- UPDATE/DELETE VIEW -->
    <div *ngIf="!isCreating" class="update-delete-container">

      <h3>Existing Artists</h3>
      <div class="artist-list" (scroll)="onScroll($event)">
        <mat-list>
          <mat-list-item *ngFor="let artist of displayedArtists"
                         (click)="selectArtist(artist)"
                         [class.selected]="artist === selectedArtist">
            {{ artist.name }}
          </mat-list-item>
        </mat-list>
        <div *ngIf="loading" class="loading-overlay">
          <mat-progress-spinner
            color="accent"
            mode="indeterminate">
          </mat-progress-spinner>
        </div>
      </div>

      <div *ngIf="selectedArtist" class="form-container">
        <h3>Edit Artist</h3>
        <form [formGroup]="updateForm" class="artist-form">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Name</mat-label>
            <input matInput formControlName="name">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Biography</mat-label>
            <textarea matInput formControlName="biography" rows="4"></textarea>
          </mat-form-field>

          <div style="display: flex; flex-direction: row; justify-content: space-between">
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Genres (separate with comma)</mat-label>
              <input matInput formControlName="genres">
            </mat-form-field>
          </div>

          <div class="button-group">
            <button style="padding: 1rem;" mat-raised-button class="add-button" type="button" (click)="updateArtist()">
              <mat-icon>update</mat-icon>Update</button>
            <button style="padding: 1rem;" mat-raised-button class="add-button"  type="button" (click)="deleteArtist()">
              <mat-icon>delete</mat-icon>Delete</button>
          </div>
        </form>
      </div>

    </div>

  </mat-card>
</div>
