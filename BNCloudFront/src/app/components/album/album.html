<div class="album-page" *ngIf="album">
  <div class="album-wrapper">
    <div class="album-header">
      <div class="album-info">

        <!-- Album Title + Edit -->
        <div class="album-title-wrapper">
          <h1 class="album-title" *ngIf="!editingName">{{ album.name }}</h1>
          <input *ngIf="editingName" [(ngModel)]="editedName" class="album-name-input" />

          <div class="edit-buttons">
            <button *ngIf="!editingName" (click)="startEditing()" class="edit-btn">Edit</button>
            <button *ngIf="editingName" (click)="saveName()" class="save-btn">Save</button>
            <button *ngIf="editingName" (click)="cancelEditing()" class="cancel-btn">Cancel</button>
            <button class="delete-btn" (click)="deleteAlbum()">Delete</button>
          </div>
        </div>

        <!-- Artist -->
        <p class="album-artist">
          <strong>by</strong>
          <a (click)="navigateToArtist(album.author.id)" class="artist-link prominent-artist">
            {{ artistNames[album.author.id] || album.author.name }}
          </a>
        </p>

        <!-- Genres -->
        <div class="album-genres" *ngIf="album.genres?.length">
          <span *ngFor="let g of album.genres" class="genre-chip">{{ g.name }}</span>
        </div>
      </div>
    </div>

    <!-- Songs Section -->
    <div class="songs-section">
      <h2 class="songs-header">Tracklist</h2>
      <div class="songs-list">
        <div
          *ngFor="let song of album.songs; let i = index"
          class="song-card"
          (click)="navigateToSong(song.id)"
        >
          <div class="song-index">{{ i + 1 }}</div>

          <div class="song-details">
            <div class="song-name">{{ song.name }}</div>
            <div class="song-file">{{ song.fileName }}</div>

            <div class="song-artists">
              <span
                *ngFor="let artist of song.artists; let last = last"
                (click)="navigateToArtist(artist)"
                class="artist-link song-artist"
              >
                {{ artistNames[artist] || artist }}
                <span *ngIf="!last">, </span>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
